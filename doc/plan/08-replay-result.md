# Phase 08: 結果発表（リプレイ）

## 概要
全ターン終了後、各チェーンの変遷をスライドショー形式で表示する。

## ゴール
- 最初のお題から最終回答までをチェーンごとに順番に表示。
- 「どうしてこうなった」を楽しむ UI。
- GIF 生成＆共有機能。

---

## 成果物
- リプレイ画面
- チェーン一覧
- スライドショー表示
- GIF 生成＆ダウンロード

---

## 機能要件

### サーバ側
| エンドポイント | 説明 |
|---------------|------|
| `GET /rooms/:id/chains` | ルームの全チェーン取得 |
| `GET /chains/:id` | 単一チェーンの全 Entry 取得 |
| `POST /chains/:id/gif` | チェーンを GIF 化して URL 返却 |

### フロント側
| 機能 | 説明 |
|------|------|
| チェーン一覧 | 「○○さんのチェーン」リスト |
| スライドショー | Entry を 1 つずつ表示、次へ/前へボタン |
| 自動再生 | 一定間隔で自動送り（オプション） |
| GIF ダウンロード | チェーンを GIF 化してダウンロード |

---

## スライドショー仕様

| 項目 | 値 |
|------|-----|
| 表示順 | Entry.order 昇順 |
| テキスト表示 | 大きめフォントで中央表示 |
| 画像表示 | キャンバスサイズに合わせて表示 |
| 送り間隔（自動） | 3秒 |
| 操作 | 次へ、前へ、自動再生ON/OFF |

---

## GIF 生成仕様

| 項目 | 値 |
|------|-----|
| フレーム | 各 Entry（テキストは画像化） |
| フレーム間隔 | 2秒 |
| 解像度 | 800 x 600 px |
| ライブラリ | gifenc / gif.js（サーバ or クライアント） |
| 保存先 | S3（Supabase Storage） |

---

## タスク

### サーバ
- [x] `GET /rooms/:id/chains` 実装
- [x] `GET /chains/:id` 実装
- [ ] GIF 生成ロジック（テキスト→画像変換含む）
- [ ] `POST /chains/:id/gif` 実装
- [ ] GIF の S3 保存

### フロント
- [x] リプレイ画面 UI
- [x] チェーン選択（タブ or ドロップダウン）
- [x] スライドショーコンポーネント
  - Entry 表示（text / image 切り替え）
  - 次へ/前へボタン
  - 自動再生トグル
- [ ] GIF ダウンロードボタン
- [x] 「もう一度遊ぶ」ボタン（ロビーへ戻る）

---

## 受け入れ条件
- [x] 全チェーンの一覧が表示される
- [x] チェーンを選択するとスライドショーが始まる
- [x] 最初のお題から最終回答まで順番に見られる
- [ ] GIF をダウンロードできる
- [x] 「もう一度遊ぶ」でロビーに戻れる

---

## 依存関係
- Phase 07 完了（全チェーン完成）

## 次フェーズへの引き継ぎ
- GIF 生成の仕組み（拡張モードで再利用可能）
