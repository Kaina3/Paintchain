# 15. çµµã—ã‚Šã¨ã‚Šãƒ¢ãƒ¼ãƒ‰

## æ¦‚è¦
çµµã ã‘ã§ã—ã‚Šã¨ã‚Šã‚’ç¹‹ã„ã§ã„ããƒ¢ãƒ¼ãƒ‰ã€‚
å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå…±æœ‰ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¦‹ãªãŒã‚‰ã€é †ç•ªã«çµµã‚’æã„ã¦ã„ãã€‚
æœ€å¾Œã«å…¨å“¡ã§ç­”ãˆåˆã‚ã›ã‚’ã—ã¦ã€ã—ã‚Šã¨ã‚ŠãŒç¹‹ãŒã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã€‚

## ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼

```
1. ã‚²ãƒ¼ãƒ é–‹å§‹
   - å…±æœ‰ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã¯ç©ºã®çŠ¶æ…‹
   - æœ€åˆã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæç”»é–‹å§‹

2. çµµã‚’æãï¼ˆé †ç•ªã«ï¼‰
   - ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒçµµã‚’æã
   - æãçµ‚ã‚ã£ãŸã‚‰ç­”ãˆï¼ˆã²ã‚‰ãŒãªï¼‰ã‚’å…¥åŠ›
   - ä»–ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯å¾…æ©Ÿã—ã¤ã¤ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’è¦‹ã‚‹

3. æå‡ºå¾Œ
   - çµµãŒã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«è¿½åŠ ã•ã‚Œã‚‹
   - æ–‡å­—æ•°ãƒ’ãƒ³ãƒˆï¼ˆâ—‹ã®æ•°ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - æ¬¡ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç•ªã«

4. å…¨æšæ•°å®Œäº†å¾Œ - çµæœç™ºè¡¨
   - å„çµµã®ç­”ãˆã‚’é †ç•ªã«å…¬é–‹
   - ã—ã‚Šã¨ã‚ŠãŒç¹‹ãŒã£ã¦ã„ã‚‹ã‹åˆ¤å®šï¼ˆâ—¯/âœ•ï¼‰
```

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### å…±æœ‰ã‚®ãƒ£ãƒ©ãƒªãƒ¼
```typescript
interface ShiritoriGallery {
  roomId: string;
  drawings: ShiritoriDrawing[];
}

interface ShiritoriDrawing {
  order: number;
  authorId: string;
  imageData: string;
  answer: string;           // ã²ã‚‰ãŒãªã®ç­”ãˆï¼ˆä»–ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã¯éå…¬é–‹ï¼‰
  letterCount: number;      // æ–‡å­—æ•°ï¼ˆãƒ’ãƒ³ãƒˆã¨ã—ã¦è¡¨ç¤ºï¼‰
  submittedAt: Date;
}

// çµæœåˆ¤å®šç”¨
interface ShiritoriResult {
  drawings: ShiritoriDrawingResult[];
  totalCorrect: number;
  totalDrawings: number;
}

interface ShiritoriDrawingResult {
  order: number;
  authorId: string;
  imageData: string;
  answer: string;
  previousAnswer?: string;
  isConnected: boolean;     // ã—ã‚Šã¨ã‚ŠãŒç¹‹ãŒã£ã¦ã„ã‚‹ã‹
  connectionDetail?: string; // ã€Œã”ã€â†’ã€Œã‚´ãƒªãƒ©ã€ã®ã‚ˆã†ãªæ¥ç¶šæƒ…å ±
}
```

### ãƒ•ã‚§ãƒ¼ã‚ºå®šç¾©
```typescript
type ShiritoriPhase = 
  | 'drawing'   // ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæç”»ä¸­
  | 'waiting'   // ä»–ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯å¾…æ©Ÿ
  | 'result';   // çµæœç™ºè¡¨
```

## è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

```typescript
interface ShiritoriModeSettings {
  drawingTimeSec: number;  // æç”»æ™‚é–“ (default: 60)
  totalDrawings: number;   // ç·çµµæšæ•° (default: 12, min: 4, max: 40)
}
```

## ã—ã‚Šã¨ã‚Šãƒ«ãƒ¼ãƒ«

### æ–‡å­—ã®å¤‰æ›ãƒ«ãƒ¼ãƒ«
```typescript
// server/src/application/gameModes/shiritoriRules.ts

// æœ€å¾Œã®æ–‡å­—ã‚’å–å¾—ï¼ˆå¤‰æ›ãƒ«ãƒ¼ãƒ«é©ç”¨ï¼‰
function getLastCharacter(word: string): string {
  let lastChar = word.slice(-1);
  
  // ã€Œã‚“ã€ã§çµ‚ã‚ã‚‹å ´åˆã¯å‰ã®æ–‡å­—
  if (lastChar === 'ã‚“') {
    lastChar = word.slice(-2, -1);
  }
  
  // ä¼¸ã°ã—æ£’ã§çµ‚ã‚ã‚‹å ´åˆã¯å‰ã®æ–‡å­—
  if (lastChar === 'ãƒ¼') {
    lastChar = word.slice(-2, -1);
  }
  
  // å°ã•ã„æ–‡å­—ã¯å¤§ããã™ã‚‹
  lastChar = convertSmallToLarge(lastChar);
  
  return lastChar;
}

// æœ€åˆã®æ–‡å­—ã‚’å–å¾—ï¼ˆå¤‰æ›ãƒ«ãƒ¼ãƒ«é©ç”¨ï¼‰
function getFirstCharacter(word: string): string {
  let firstChar = word.slice(0, 1);
  
  // å°ã•ã„æ–‡å­—ã¯å¤§ããã™ã‚‹
  firstChar = convertSmallToLarge(firstChar);
  
  return firstChar;
}

// å°ã•ã„æ–‡å­—â†’å¤§ãã„æ–‡å­—ã®å¤‰æ›
function convertSmallToLarge(char: string): string {
  const smallToLarge: Record<string, string> = {
    'ã': 'ã‚', 'ãƒ': 'ã„', 'ã…': 'ã†', 'ã‡': 'ãˆ', 'ã‰': 'ãŠ',
    'ã‚ƒ': 'ã‚„', 'ã‚…': 'ã‚†', 'ã‚‡': 'ã‚ˆ', 'ã£': 'ã¤',
    'ã‚¡': 'ã‚¢', 'ã‚£': 'ã‚¤', 'ã‚¥': 'ã‚¦', 'ã‚§': 'ã‚¨', 'ã‚©': 'ã‚ª',
    'ãƒ£': 'ãƒ¤', 'ãƒ¥': 'ãƒ¦', 'ãƒ§': 'ãƒ¨', 'ãƒƒ': 'ãƒ„',
  };
  return smallToLarge[char] || char;
}

// æ¿ç‚¹ãƒ»åŠæ¿ç‚¹ã‚’å¤–ã—ãŸæ–‡å­—ã‚‚è¨±å®¹ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
function isConnected(prevAnswer: string, currentAnswer: string): boolean {
  const lastChar = getLastCharacter(prevAnswer);
  const firstChar = getFirstCharacter(currentAnswer);
  
  // å®Œå…¨ä¸€è‡´
  if (normalizeKana(lastChar) === normalizeKana(firstChar)) {
    return true;
  }
  
  // æ¿ç‚¹ãƒ»åŠæ¿ç‚¹ã‚’å¤–ã—ã¦æ¯”è¼ƒ
  const lastCharBase = removeDakuten(lastChar);
  const firstCharBase = removeDakuten(firstChar);
  
  return normalizeKana(lastCharBase) === normalizeKana(firstCharBase);
}

// æ¿ç‚¹ãƒ»åŠæ¿ç‚¹ã‚’å¤–ã™
function removeDakuten(char: string): string {
  const dakutenMap: Record<string, string> = {
    'ãŒ': 'ã‹', 'ã': 'ã', 'ã': 'ã', 'ã’': 'ã‘', 'ã”': 'ã“',
    'ã–': 'ã•', 'ã˜': 'ã—', 'ãš': 'ã™', 'ãœ': 'ã›', 'ã': 'ã',
    'ã ': 'ãŸ', 'ã¢': 'ã¡', 'ã¥': 'ã¤', 'ã§': 'ã¦', 'ã©': 'ã¨',
    'ã°': 'ã¯', 'ã³': 'ã²', 'ã¶': 'ãµ', 'ã¹': 'ã¸', 'ã¼': 'ã»',
    'ã±': 'ã¯', 'ã´': 'ã²', 'ã·': 'ãµ', 'ãº': 'ã¸', 'ã½': 'ã»',
    // ã‚«ã‚¿ã‚«ãƒŠã‚‚åŒæ§˜...
  };
  return dakutenMap[char] || char;
}

// ã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠã®æ­£è¦åŒ–
function normalizeKana(char: string): string {
  // ã‚«ã‚¿ã‚«ãƒŠã‚’ã²ã‚‰ãŒãªã«å¤‰æ›
  return char.normalize('NFKC').replace(/[\u30A1-\u30F6]/g, (match) => {
    return String.fromCharCode(match.charCodeAt(0) - 0x60);
  });
}
```

## å®Ÿè£…ã‚¿ã‚¹ã‚¯

### 15.1 ShiritoriModeHandler ã®å®Ÿè£…

```typescript
// server/src/application/gameModes/shiritoriMode.ts

export class ShiritoriModeHandler implements GameModeHandler {
  // ã“ã®ãƒ¢ãƒ¼ãƒ‰ã¯ç‰¹æ®Š: 1äººãšã¤é †ç•ªã«æã
  // å…¨å“¡åŒæ™‚ã§ã¯ãªã„
  
  private currentDrawerIndex: number = 0;
  private gallery: ShiritoriDrawing[] = [];
  
  getNextDrawer(room: Room): Player {
    const players = room.players;
    return players[this.currentDrawerIndex % players.length];
  }
  
  handleSubmission(room: Room, playerId: string, data: SubmissionData): boolean {
    // ç¾åœ¨ã®æç”»è€…ã‹ãƒã‚§ãƒƒã‚¯
    // ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«è¿½åŠ 
    // æ¬¡ã®æç”»è€…ã«ç§»è¡Œ
    // ç·æšæ•°ã«é”ã—ãŸã‚‰çµæœãƒ•ã‚§ãƒ¼ã‚ºã¸
  }
  
  generateResult(room: Room): ShiritoriResult {
    // å„çµµã®æ¥ç¶šã‚’åˆ¤å®š
    // çµæœãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
  }
}
```

### 15.2 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ

#### WebSocketã‚¤ãƒ™ãƒ³ãƒˆ
```typescript
// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â†’ ã‚µãƒ¼ãƒãƒ¼
| { type: 'submit_shiritori'; payload: { imageData: string; answer: string } }

// ã‚µãƒ¼ãƒãƒ¼ â†’ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
| { type: 'shiritori_drawing_added'; payload: { 
    drawing: { order: number; authorId: string; imageData: string; letterCount: number };
    nextDrawerId: string;
  }}
| { type: 'shiritori_your_turn'; payload: { previousLetterHint: string } }
| { type: 'shiritori_result'; payload: ShiritoriResult }
```

### 15.3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - ã‚²ãƒ¼ãƒ ç”»é¢

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆæç”»è€…ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çµµã—ã‚Šã¨ã‚Š - 5/12æšç›®                      æ®‹ã‚Š 45ç§’   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚                             â”‚
â”‚  ã‚®ãƒ£ãƒ©ãƒªãƒ¼               â”‚      æç”»ã‚­ãƒ£ãƒ³ãƒã‚¹         â”‚
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”      â”‚                             â”‚
â”‚  â”‚ 1 â”‚ â”‚ 2 â”‚ â”‚ 3 â”‚      â”‚                             â”‚
â”‚  â”‚â—‹â—‹â—‹â”‚ â”‚â—‹â—‹ â”‚ â”‚â—‹â—‹â—‹â—‹â”‚      â”‚                             â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜      â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”                   â”‚                             â”‚
â”‚  â”‚ 4 â”‚  â† å‰ã®çµµ         â”‚                             â”‚
â”‚  â”‚â—‹â—‹ â”‚                   â”‚                             â”‚
â”‚  â””â”€â”€â”€â”˜                   â”‚                             â”‚
â”‚                           â”‚                             â”‚
â”‚  ğŸ’¡ã€Œâ—‹ã€ã‹ã‚‰å§‹ã¾ã‚‹çµµã‚’   â”‚                             â”‚
â”‚    æã„ã¦ã­ï¼             â”‚                             â”‚
â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚ ç­”ãˆï¼ˆã²ã‚‰ãŒãªï¼‰:           â”‚
â”‚                           â”‚ [________________] [æå‡º]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆå¾…æ©Ÿè€…ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çµµã—ã‚Šã¨ã‚Š - 5/12æšç›®          ğŸ‘¤ PlayerA ãŒæç”»ä¸­... â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚                    ã‚®ãƒ£ãƒ©ãƒªãƒ¼                           â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚      â”‚
â”‚  â”‚    1    â”‚ â”‚    2    â”‚ â”‚    3    â”‚ â”‚    4    â”‚      â”‚
â”‚  â”‚         â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚      â”‚
â”‚  â”‚  â—‹â—‹â—‹   â”‚ â”‚   â—‹â—‹   â”‚ â”‚ â—‹â—‹â—‹â—‹  â”‚ â”‚   â—‹â—‹   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚  æ¬¡ã¯: ğŸ‘¤ ã‚ãªãŸ (3ç•ªç›®)                               â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 15.4 çµæœç”»é¢

#### ShiritoriResult.tsx
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çµµã—ã‚Šã¨ã‚Šçµæœ                     10/12 ç¹‹ãŒã£ãŸï¼   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â†’ã€Œã‚Šã€â†’ â”Œâ”€â”€â”€â”€â”€â” â†’ã€Œã”ã€â†’ â”Œâ”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚     â”‚    â—¯    â”‚     â”‚    â—¯    â”‚     â”‚           â”‚
â”‚  â”‚  1  â”‚         â”‚  2  â”‚         â”‚  3  â”‚           â”‚
â”‚  â”‚     â”‚         â”‚     â”‚         â”‚     â”‚           â”‚
â”‚  â”‚ã‚Šã‚“ã”â”‚         â”‚ã‚´ãƒªãƒ©â”‚         â”‚ã‚‰ã£ã±â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â†’ã€Œã°ã€â†’ â”Œâ”€â”€â”€â”€â”€â” â†’ã€Œ?ã€â†’ â”Œâ”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚     â”‚    âœ•    â”‚     â”‚    â—¯    â”‚     â”‚           â”‚
â”‚  â”‚  4  â”‚         â”‚  5  â”‚         â”‚  6  â”‚           â”‚
â”‚  â”‚     â”‚         â”‚     â”‚         â”‚     â”‚           â”‚
â”‚  â”‚ãƒ‘ãƒ³ãƒ€â”‚         â”‚ã ã‚‹ã¾â”‚         â”‚ã¾ãã‚‰â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                         â”‚
â”‚  ... (ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«)                                       â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ãƒ­ãƒ“ãƒ¼ã«æˆ»ã‚‹]                              [å…±æœ‰]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 15.5 å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

#### Step 1: ã—ã‚Šã¨ã‚Šãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
1. `shiritoriRules.ts` ä½œæˆ
2. æ–‡å­—å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
3. æ¥ç¶šåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
4. å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆ

#### Step 2: ãƒ¢ãƒ¼ãƒ‰ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
1. `ShiritoriModeHandler` ä½œæˆ
2. é †ç•ªç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯
3. ã‚®ãƒ£ãƒ©ãƒªãƒ¼ç®¡ç†
4. çµæœç”Ÿæˆ

#### Step 3: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
1. WebSocketã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
2. ã‚®ãƒ£ãƒ©ãƒªãƒ¼æ›´æ–°ã®ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
3. ã‚¿ãƒ¼ãƒ³é€šçŸ¥

#### Step 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - ã‚²ãƒ¼ãƒ ç”»é¢
1. `ShiritoriGallery.tsx` ä½œæˆ
2. æç”»è€…ç”¨UI
3. å¾…æ©Ÿè€…ç”¨UI
4. ç­”ãˆå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 

#### Step 5: çµæœç”»é¢
1. `ShiritoriResult.tsx` ä½œæˆ
2. æ¥ç¶šè¡¨ç¤ºUI
3. ã‚¹ã‚³ã‚¢è¡¨ç¤º

## ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ä¸€è¦§

### æ–°è¦ä½œæˆ
- `server/src/application/gameModes/shiritoriMode.ts`
- `server/src/application/gameModes/shiritoriRules.ts`
- `frontend/src/features/game/components/ShiritoriGallery.tsx`
- `frontend/src/features/game/components/ShiritoriDrawing.tsx`
- `frontend/src/features/game/components/ShiritoriResult.tsx`
- `frontend/src/features/game/components/ShiritoriAnswerInput.tsx`

### ä¿®æ­£
- `server/src/application/gameUseCases.ts` - ãƒ¢ãƒ¼ãƒ‰åˆ†å²è¿½åŠ 
- `server/src/infra/ws/wsHandler.ts` - æ–°ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
- `frontend/src/shared/types/index.ts` - å‹å®šç¾©è¿½åŠ 
- `frontend/src/features/game/pages/GamePage.tsx` - ã—ã‚Šã¨ã‚Šãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- `frontend/src/features/game/store/gameStore.ts` - ã‚®ãƒ£ãƒ©ãƒªãƒ¼çŠ¶æ…‹è¿½åŠ 

## ãƒ†ã‚¹ãƒˆé …ç›®

### ã—ã‚Šã¨ã‚Šãƒ«ãƒ¼ãƒ«
- [ ] ã€Œã‚“ã€ã§çµ‚ã‚ã‚‹å ´åˆã€å‰ã®æ–‡å­—ãŒä½¿ã‚ã‚Œã‚‹
- [ ] ä¼¸ã°ã—æ£’ã§çµ‚ã‚ã‚‹å ´åˆã€å‰ã®æ–‡å­—ãŒä½¿ã‚ã‚Œã‚‹
- [ ] å°ã•ã„æ–‡å­—ãŒå¤§ãã„æ–‡å­—ã«å¤‰æ›ã•ã‚Œã‚‹
- [ ] æ¿ç‚¹ãƒ»åŠæ¿ç‚¹ã‚’å¤–ã—ã¦ã‚‚æ¥ç¶šå¯èƒ½

### ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼
- [ ] æ­£ã—ã„é †ç•ªã§æç”»ã‚¿ãƒ¼ãƒ³ãŒå›ã‚‹
- [ ] ã‚®ãƒ£ãƒ©ãƒªãƒ¼ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åŒæœŸã•ã‚Œã‚‹
- [ ] æ–‡å­—æ•°ãƒ’ãƒ³ãƒˆãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è¨­å®šã—ãŸæšæ•°ã§çµ‚äº†ã™ã‚‹

### çµæœè¡¨ç¤º
- [ ] å„çµµã®ç­”ãˆãŒå…¬é–‹ã•ã‚Œã‚‹
- [ ] æ¥ç¶šãŒæ­£ã—ãåˆ¤å®šã•ã‚Œã‚‹
- [ ] æ­£è§£æ•°ãŒè¡¨ç¤ºã•ã‚Œã‚‹

## å®Œäº†æ¡ä»¶
- [ ] é †ç•ªã«1äººãšã¤çµµã‚’æã‘ã‚‹
- [ ] ã‚®ãƒ£ãƒ©ãƒªãƒ¼ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å…¨å“¡ã«åŒæœŸã•ã‚Œã‚‹
- [ ] æ–‡å­—æ•°ãƒ’ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã—ã‚Šã¨ã‚Šãƒ«ãƒ¼ãƒ«ãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹
- [ ] çµæœç”»é¢ã§æ¥ç¶šåˆ¤å®šãŒè¡¨ç¤ºã•ã‚Œã‚‹
